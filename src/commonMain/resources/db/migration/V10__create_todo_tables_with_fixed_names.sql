DROP TABLE TODO_LISTS_TO_TASKS;
DROP TABLE TASKS_TO_SUBTASKS;
DROP TABLE TODO_LISTS;
DROP TABLE TODO_TASKS;
CREATE TABLE IF NOT EXISTS todo_lists (ID INT AUTO_INCREMENT PRIMARY KEY, TITLE VARCHAR(100) NOT NULL, USER_ID INT NOT NULL, CONSTRAINT FK_TODO_LISTS_USER_ID_ID FOREIGN KEY(USER_ID) REFERENCES users(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS todo_tasks (ID INT AUTO_INCREMENT PRIMARY KEY, DESCRIPTION TEXT NOT NULL, ADDED_TIME DATETIME(6) NOT NULL, MODIFIED_TIME DATETIME(6) NOT NULL, IS_TO_DO BOOLEAN NOT NULL, PRIORITY INT NOT NULL, USER_ID INT NOT NULL, CONSTRAINT FK_TODO_TASKS_USER_ID_ID FOREIGN KEY(USER_ID) REFERENCES users(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS todo_lists_to_tasks (ID INT AUTO_INCREMENT PRIMARY KEY, TODO_LIST_ID INT NOT NULL, TASK_ID INT NOT NULL, CONSTRAINT FK_TODO_LISTS_TO_TASKS_TODO_LIST_ID_ID FOREIGN KEY (TODO_LIST_ID) REFERENCES todo_lists(ID) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT FK_TODO_LISTS_TO_TASKS_TASK_ID_ID FOREIGN KEY (TASK_ID) REFERENCES todo_tasks(ID) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS tasks_to_subtasks (ID INT AUTO_INCREMENT PRIMARY KEY, PARENT_ID INT NOT NULL, CHILD_ID INT NOT NULL, CONSTRAINT FK_TASKS_TO_SUBTASKS_PARENT_ID_ID FOREIGN KEY (PARENT_ID) REFERENCES todo_tasks(ID) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT FK_TASKS_TO_SUBTASKS_CHILD_ID_ID FOREIGN KEY (CHILD_ID) REFERENCES todo_tasks(ID) ON DELETE CASCADE ON UPDATE RESTRICT);